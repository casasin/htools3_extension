<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>hTools3.dialogs.batch.set &#8212; hTools3</title>
    
    <link rel="stylesheet" href="../../../../_static/classic.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../../../_static/custom.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../../../',
        VERSION:     'alpha',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../../../_static/sidebar.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" /> 
  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">hTools3</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../dialogs.html" accesskey="U">hTools3.dialogs</a> &#187;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <h1>Source code for hTools3.dialogs.batch.set</h1><div class="highlight"><pre>
<span></span><span class="c1"># coding: utf-8</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="k">import</span> <span class="n">print_function</span>

<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">json</span>
<span class="kn">import</span> <span class="nn">plistlib</span>
<span class="kn">from</span> <span class="nn">vanilla</span> <span class="k">import</span> <span class="n">Group</span><span class="p">,</span> <span class="n">SquareButton</span><span class="p">,</span> <span class="n">List</span><span class="p">,</span> <span class="n">CheckBox</span><span class="p">,</span> <span class="n">EditText</span>
<span class="kn">from</span> <span class="nn">mojo.UI</span> <span class="k">import</span> <span class="n">AccordionView</span><span class="p">,</span> <span class="n">PutFile</span><span class="p">,</span> <span class="n">GetFile</span>
<span class="kn">from</span> <span class="nn">hTools3.dialogs.batch.base</span> <span class="k">import</span> <span class="n">BatchDialogBase</span>
<span class="kn">from</span> <span class="nn">hTools3.modules.fontinfo</span> <span class="k">import</span> <span class="n">FontInfoAttributes</span><span class="p">,</span> <span class="n">FontInfoAttributesIgnorePrefix</span>
<span class="kn">from</span> <span class="nn">hTools3.modules.fontutils</span> <span class="k">import</span> <span class="n">getFontID</span>
<span class="kn">from</span> <span class="nn">hTools3.modules.unicode</span> <span class="k">import</span> <span class="n">unicodeHexToInt</span><span class="p">,</span> <span class="n">unicodeIntToHex</span><span class="p">,</span> <span class="n">clearUnicodes</span><span class="p">,</span> <span class="n">autoUnicode</span>

<div class="viewcode-block" id="BatchSetDialog"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog">[docs]</a><span class="k">class</span> <span class="nc">BatchSetDialog</span><span class="p">(</span><span class="n">BatchDialogBase</span><span class="p">):</span>

    <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">    A dialog to set several types of data in selected target fonts.</span>

<span class="sd">    .. code-block:: python</span>

<span class="sd">        from hTools3.dialogs.batch.set import BatchSetDialog</span>
<span class="sd">        BatchSetDialog()</span>

<span class="sd">    &#39;&#39;&#39;</span>

    <span class="n">title</span> <span class="o">=</span> <span class="s1">&#39;batch set&#39;</span>
    <span class="n">key</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.set&#39;</span> <span class="o">%</span> <span class="n">BatchDialogBase</span><span class="o">.</span><span class="n">key</span>

    <span class="n">fontInfo</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">FontInfoAttributes</span><span class="p">)</span>
    <span class="k">del</span> <span class="n">fontInfo</span><span class="p">[</span><span class="s1">&#39;WOFF&#39;</span><span class="p">]</span>
    <span class="k">del</span> <span class="n">fontInfo</span><span class="p">[</span><span class="s1">&#39;Miscellaneous&#39;</span><span class="p">]</span>

    <span class="n">attrsIgnorePrefix</span> <span class="o">=</span> <span class="n">FontInfoAttributesIgnorePrefix</span>

    <span class="n">fontInfoData</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">unicodesData</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="mi">480</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">window</span><span class="p">(</span>
                <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mi">3</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">),</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span>
                <span class="n">minSize</span><span class="o">=</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mi">2</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">height</span><span class="p">))</span>

        <span class="c1"># build groups</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initFontSelectorGroup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initFontInfoSelectorGroup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initGlyphSetSelectorGroup</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initUnicodesSelectorGroup</span><span class="p">()</span>
        <span class="c1"># self.initFindAndReplaceSelectorGroup()</span>

        <span class="c1"># build accordion</span>
        <span class="n">descriptions</span> <span class="o">=</span> <span class="p">[</span>
            <span class="nb">dict</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;fonts&quot;</span><span class="p">,</span>
                <span class="n">view</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fontSelector</span><span class="p">,</span>
                <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fontSelectorHeight</span><span class="p">,</span>
                <span class="n">collapsed</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">canResize</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="nb">dict</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;font info&quot;</span><span class="p">,</span>
                <span class="n">view</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="p">,</span>
                <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelectorHeight</span><span class="p">,</span>
                <span class="n">collapsed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">canResize</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="nb">dict</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;glyph set&quot;</span><span class="p">,</span>
                <span class="n">view</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="p">,</span>
                <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelectorHeight</span><span class="p">,</span>
                <span class="n">collapsed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">canResize</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="nb">dict</span><span class="p">(</span><span class="n">label</span><span class="o">=</span><span class="s2">&quot;unicodes&quot;</span><span class="p">,</span>
                <span class="n">view</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="p">,</span>
                <span class="n">size</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelectorHeight</span><span class="p">,</span>
                <span class="n">collapsed</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">canResize</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
            <span class="c1"># dict(label=&quot;find &amp; replace&quot;,</span>
            <span class="c1">#     view=self.findAndReplaceSelector,</span>
            <span class="c1">#     size=self.findAndReplaceSelectorHeight,</span>
            <span class="c1">#     collapsed=True,</span>
            <span class="c1">#     canResize=False),</span>
        <span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">accordionView</span> <span class="o">=</span> <span class="n">AccordionView</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="p">),</span> <span class="n">descriptions</span><span class="p">)</span>

        <span class="c1"># setup window</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">initBatchWindowBehaviour</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">w</span><span class="o">.</span><span class="n">open</span><span class="p">()</span>

    <span class="c1"># ------------</span>
    <span class="c1"># initializers</span>
    <span class="c1"># ------------</span>

<div class="viewcode-block" id="BatchSetDialog.initFontInfoSelectorGroup"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.initFontInfoSelectorGroup">[docs]</a>    <span class="k">def</span> <span class="nf">initFontInfoSelectorGroup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Initialize fontInfo group.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span> <span class="o">=</span> <span class="n">Group</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="p">))</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">importFontInfoFromFont</span> <span class="o">=</span> <span class="n">SquareButton</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span><span class="p">),</span>
                <span class="s2">&quot;import info from UFO…&quot;</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">importFontInfoFromFontCallback</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">importFontInfoDict</span> <span class="o">=</span> <span class="n">SquareButton</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span><span class="p">),</span>
                <span class="s2">&quot;import info from json file…&quot;</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">importFontInfoCallback</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span>
        <span class="n">listHeight</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">p</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">fontInfo</span> <span class="o">=</span> <span class="n">List</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="n">listHeight</span><span class="p">),</span>
                <span class="p">[],</span>
                <span class="n">enableDelete</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">drawFocusRing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">editCallback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">fontInfoDeletedCallback</span><span class="p">,</span>
                <span class="n">columnDescriptions</span><span class="o">=</span><span class="p">[</span>
                    <span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;attribute&quot;</span><span class="p">),</span>
                    <span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">allowsSorting</span><span class="o">=</span><span class="kc">False</span><span class="p">),</span>
                <span class="p">])</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">selectAll</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span><span class="p">),</span>
                <span class="s2">&quot;select all attributes&quot;</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selectAllFontInfoAttributes</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">exportFontInfoDict</span> <span class="o">=</span> <span class="n">SquareButton</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span><span class="p">),</span>
                <span class="s2">&quot;export info to json file…&quot;</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">exportFontInfoCallback</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">applyFontInfoButton</span> <span class="o">=</span> <span class="n">SquareButton</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span><span class="p">),</span>
                <span class="s2">&quot;apply selected info&quot;</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">applyFontInfoCallback</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">preflight</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span><span class="p">),</span>
                <span class="s2">&quot;preflight&quot;</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelectorHeight</span> <span class="o">=</span> <span class="mi">340</span></div>

<div class="viewcode-block" id="BatchSetDialog.initGlyphSetSelectorGroup"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.initGlyphSetSelectorGroup">[docs]</a>    <span class="k">def</span> <span class="nf">initGlyphSetSelectorGroup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Initialize glyphSet group.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span> <span class="o">=</span> <span class="n">Group</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="p">))</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">importGlyphSet</span> <span class="o">=</span> <span class="n">SquareButton</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span><span class="p">),</span>
                <span class="s2">&quot;import glyph set…&quot;</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">importGlyphSetCallback</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span>
        <span class="n">listHeight</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">glyphNames</span> <span class="o">=</span> <span class="n">EditText</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="n">listHeight</span><span class="p">),</span>
                <span class="s1">&#39;&#39;</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="n">p</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">exportGlyphSet</span> <span class="o">=</span> <span class="n">SquareButton</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span><span class="p">),</span>
                <span class="s2">&quot;export glyph set…&quot;</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">exportGlyphSetCallback</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="n">p</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">createMissingGlyphs</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span><span class="p">),</span>
                <span class="s2">&quot;create missing glyphs&quot;</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">deleteRemainingGlyphs</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span><span class="p">),</span>
                <span class="s2">&quot;delete remaining glyphs&quot;</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">applyGlyphSet</span> <span class="o">=</span> <span class="n">SquareButton</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span><span class="p">),</span>
                <span class="s2">&quot;apply glyph set&quot;</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">applyGlyphSetCallback</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">preflight</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span><span class="p">),</span>
                <span class="s2">&quot;preflight&quot;</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelectorHeight</span> <span class="o">=</span> <span class="mi">320</span></div>

<div class="viewcode-block" id="BatchSetDialog.initUnicodesSelectorGroup"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.initUnicodesSelectorGroup">[docs]</a>    <span class="k">def</span> <span class="nf">initUnicodesSelectorGroup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Initialize unicodes group.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span> <span class="o">=</span> <span class="n">Group</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="p">))</span>

        <span class="n">x</span> <span class="o">=</span> <span class="n">y</span> <span class="o">=</span> <span class="n">p</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">padding</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">importExtraUnicodes</span> <span class="o">=</span> <span class="n">SquareButton</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span><span class="p">),</span>
                <span class="s2">&quot;import extra unicodes…&quot;</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">importUnicodesCallback</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span>
        <span class="n">listHeight</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span>
        <span class="n">colWidth</span>   <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">width</span> <span class="o">*</span> <span class="mi">3</span><span class="p">)</span> <span class="o">-</span> <span class="n">p</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">unicodes</span> <span class="o">=</span> <span class="n">List</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="n">listHeight</span><span class="p">),</span>
                <span class="p">[],</span>
                <span class="n">drawFocusRing</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">columnDescriptions</span><span class="o">=</span><span class="p">[</span>
                    <span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;glyph name&quot;</span><span class="p">,</span>  <span class="n">width</span><span class="o">=</span><span class="n">colWidth</span><span class="o">*</span><span class="mf">0.50</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">allowsSorting</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                    <span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;unicode hex&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">colWidth</span><span class="o">*</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">allowsSorting</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                    <span class="nb">dict</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="s2">&quot;unicode int&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="n">colWidth</span><span class="o">*</span><span class="mf">0.25</span><span class="p">,</span> <span class="n">editable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">allowsSorting</span><span class="o">=</span><span class="kc">True</span><span class="p">),</span>
                <span class="p">])</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">3</span> <span class="o">+</span> <span class="n">p</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">selectAllUnicodes</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span><span class="p">),</span>
                <span class="s2">&quot;select all unicodes&quot;</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">selectAllUnicodesCallback</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">*</span> <span class="mi">2</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">clearUnicodes</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span><span class="p">),</span>
                <span class="s2">&quot;clear existing unicodes&quot;</span><span class="p">,</span>
                <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">applyUnicodesButton</span> <span class="o">=</span> <span class="n">SquareButton</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">buttonHeight</span><span class="p">),</span>
                <span class="s2">&quot;set unicodes…&quot;</span><span class="p">,</span>
                <span class="n">callback</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">applyUnicodesCallback</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="n">y</span> <span class="o">=</span> <span class="o">-</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span> <span class="o">+</span> <span class="n">p</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">preflight</span> <span class="o">=</span> <span class="n">CheckBox</span><span class="p">(</span>
                <span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">-</span><span class="n">p</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">textHeight</span><span class="p">),</span>
                <span class="s2">&quot;preflight&quot;</span><span class="p">,</span>
                <span class="n">sizeStyle</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">sizeStyle</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelectorHeight</span> <span class="o">=</span> <span class="mi">320</span></div>

<div class="viewcode-block" id="BatchSetDialog.initFindAndReplaceSelectorGroup"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.initFindAndReplaceSelectorGroup">[docs]</a>    <span class="k">def</span> <span class="nf">initFindAndReplaceSelectorGroup</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Initialize findAndReplace group.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">findAndReplaceSelector</span> <span class="o">=</span> <span class="n">Group</span><span class="p">((</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">findAndReplaceSelectorHeight</span> <span class="o">=</span> <span class="mi">100</span></div>

    <span class="c1"># -------------</span>
    <span class="c1"># dynamic attrs</span>
    <span class="c1"># -------------</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">selectedFontInfoSection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get selected font info section.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">sections</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">section</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">sections</span><span class="o">.</span><span class="n">getItems</span><span class="p">()[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">section</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">selectedFontInfoSubSection</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get selected font info subsection.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">subSections</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">subsection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">subSections</span><span class="o">.</span><span class="n">getItems</span><span class="p">()[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">subsection</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">selectedFontInfoAttribute</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get selected font info attribute.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">i</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">subSectionAttributes</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">attribute</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">subSectionAttributes</span><span class="o">.</span><span class="n">getItems</span><span class="p">()[</span><span class="n">i</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">attribute</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">selectedFontInfoDataAsDict</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get selected font info attributes and data as a dict.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">fontInfoDict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">fontInfo</span><span class="o">.</span><span class="n">getSelection</span><span class="p">():</span>
            <span class="n">entry</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">fontInfo</span><span class="o">.</span><span class="n">get</span><span class="p">()[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">attr</span> <span class="o">=</span> <span class="n">entry</span><span class="p">[</span><span class="s1">&#39;attribute&#39;</span><span class="p">]</span>
            <span class="n">fontInfoDict</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoData</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span>
        <span class="k">return</span> <span class="n">fontInfoDict</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">selectedUnicodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Get selected unicodes.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">selection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">unicodes</span><span class="o">.</span><span class="n">getSelection</span><span class="p">()</span>
        <span class="n">unicodes</span>  <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">unicodes</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">uniDict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">L</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">unicodes</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">selection</span><span class="p">:</span>
                <span class="n">glyphName</span> <span class="o">=</span> <span class="n">L</span><span class="p">[</span><span class="s1">&#39;glyph name&#39;</span><span class="p">]</span>
                <span class="n">uniInt</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">L</span><span class="p">[</span><span class="s1">&#39;unicode int&#39;</span><span class="p">])</span>
                <span class="n">uniDict</span><span class="p">[</span><span class="n">glyphName</span><span class="p">]</span> <span class="o">=</span> <span class="n">uniInt</span>
        <span class="k">return</span> <span class="n">uniDict</span>

    <span class="c1"># ---------</span>
    <span class="c1"># callbacks</span>
    <span class="c1"># ---------</span>

<div class="viewcode-block" id="BatchSetDialog.importFontInfoCallback"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.importFontInfoCallback">[docs]</a>    <span class="k">def</span> <span class="nf">importFontInfoCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;import font info data from .json file&#39;</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">GetFile</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">fileTypes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;json&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filePath</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;no json file selected.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">importFontInfo</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.importFontInfoFromFontCallback"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.importFontInfoFromFontCallback">[docs]</a>    <span class="k">def</span> <span class="nf">importFontInfoFromFontCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;import font info data from .ufo file&#39;</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">GetFile</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">fileTypes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ufo&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filePath</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;no ufo file selected.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">importFontInfoFromFont</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.selectAllFontInfoAttributes"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.selectAllFontInfoAttributes">[docs]</a>    <span class="k">def</span> <span class="nf">selectAllFontInfoAttributes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sender</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">fontInfo</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">fontInfo</span><span class="o">.</span><span class="n">setSelection</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.exportFontInfoCallback"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.exportFontInfoCallback">[docs]</a>    <span class="k">def</span> <span class="nf">exportFontInfoCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;export font info data to json format&#39;</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">PutFile</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;fontinfo.json&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filePath</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exportFontInfo</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.applyFontInfoCallback"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.applyFontInfoCallback">[docs]</a>    <span class="k">def</span> <span class="nf">applyFontInfoCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="n">preflight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">preflight</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">preflight</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preflight</span><span class="p">(</span><span class="n">fontInfo</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">batchSetFontInfo</span><span class="p">()</span></div>

<div class="viewcode-block" id="BatchSetDialog.importGlyphSetCallback"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.importGlyphSetCallback">[docs]</a>    <span class="k">def</span> <span class="nf">importGlyphSetCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;import glyph order from .enc file&#39;</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">GetFile</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">fileTypes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;enc&#39;</span><span class="p">,</span> <span class="s1">&#39;txt&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filePath</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;no encoding file selected.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">importGlyphSet</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.exportGlyphSetCallback"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.exportGlyphSetCallback">[docs]</a>    <span class="k">def</span> <span class="nf">exportGlyphSetCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;export glyph set to .enc file&#39;</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">PutFile</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">fileName</span><span class="o">=</span><span class="s1">&#39;encoding.enc&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">filePath</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">exportGlyphSet</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.applyGlyphSetCallback"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.applyGlyphSetCallback">[docs]</a>    <span class="k">def</span> <span class="nf">applyGlyphSetCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="n">preflight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">preflight</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">preflight</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preflight</span><span class="p">(</span><span class="n">glyphOrder</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">batchSetGlyphOrder</span><span class="p">()</span></div>

<div class="viewcode-block" id="BatchSetDialog.fontInfoDeletedCallback"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.fontInfoDeletedCallback">[docs]</a>    <span class="k">def</span> <span class="nf">fontInfoDeletedCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="n">fontInfoAttrs</span>   <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontInfoData</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
        <span class="n">fontInfoAttrsUI</span> <span class="o">=</span> <span class="nb">set</span><span class="p">([</span><span class="n">entry</span><span class="p">[</span><span class="s1">&#39;attribute&#39;</span><span class="p">]</span> <span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">fontInfo</span><span class="o">.</span><span class="n">get</span><span class="p">()])</span>
        <span class="n">deletedAttrs</span> <span class="o">=</span> <span class="n">fontInfoAttrs</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="n">fontInfoAttrsUI</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">deletedAttrs</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;deleting font info attributes...</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">attr</span> <span class="ow">in</span> <span class="n">deletedAttrs</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">- </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">attr</span><span class="p">)</span>
                <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoData</span><span class="p">[</span><span class="n">attr</span><span class="p">]</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">...done.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.importUnicodesCallback"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.importUnicodesCallback">[docs]</a>    <span class="k">def</span> <span class="nf">importUnicodesCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;import unicodes from .uni file&#39;</span>
        <span class="n">filePath</span> <span class="o">=</span> <span class="n">GetFile</span><span class="p">(</span><span class="n">message</span><span class="o">=</span><span class="n">msg</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">fileTypes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;uni&#39;</span><span class="p">])</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filePath</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;no unicodes file selected.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">importUnicodes</span><span class="p">(</span><span class="n">filePath</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.selectAllUnicodesCallback"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.selectAllUnicodesCallback">[docs]</a>    <span class="k">def</span> <span class="nf">selectAllUnicodesCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">sender</span><span class="o">.</span><span class="n">get</span><span class="p">():</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">unicodes</span><span class="p">)))</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">selection</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">unicodes</span><span class="o">.</span><span class="n">setSelection</span><span class="p">(</span><span class="n">selection</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.applyUnicodesCallback"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.applyUnicodesCallback">[docs]</a>    <span class="k">def</span> <span class="nf">applyUnicodesCallback</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sender</span><span class="p">):</span>
        <span class="n">preflight</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">preflight</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">preflight</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preflight</span><span class="p">(</span><span class="n">unicodes</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">batchSetUnicodes</span><span class="p">()</span></div>

    <span class="c1"># -------</span>
    <span class="c1"># methods</span>
    <span class="c1"># -------</span>

<div class="viewcode-block" id="BatchSetDialog.loadFontInfoDict"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.loadFontInfoDict">[docs]</a>    <span class="k">def</span> <span class="nf">loadFontInfoDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontInfoDict</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Load font info data from dictionary into the UI.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">fontInfoDictItems</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">fontInfoDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">D</span> <span class="o">=</span> <span class="p">{</span> <span class="s2">&quot;attribute&quot;</span> <span class="p">:</span> <span class="n">attr</span> <span class="p">,</span> <span class="s2">&quot;value&quot;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">value</span><span class="p">)</span> <span class="p">}</span>
            <span class="n">fontInfoDictItems</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoSelector</span><span class="o">.</span><span class="n">fontInfo</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">fontInfoDictItems</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.loadUnicodesDict"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.loadUnicodesDict">[docs]</a>    <span class="k">def</span> <span class="nf">loadUnicodesDict</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">unicodesDict</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Load unicode data from dictionary into the UI.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">unicodeDictItems</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">uniHex</span><span class="p">,</span> <span class="n">glyphName</span> <span class="ow">in</span> <span class="n">unicodesDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
            <span class="n">uniInt</span> <span class="o">=</span> <span class="n">unicodeHexToInt</span><span class="p">(</span><span class="n">uniHex</span><span class="p">)</span>
            <span class="n">D</span> <span class="o">=</span> <span class="p">{</span>
                <span class="s2">&quot;glyph name&quot;</span>  <span class="p">:</span> <span class="n">glyphName</span> <span class="p">,</span>
                <span class="s2">&quot;unicode hex&quot;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">uniHex</span><span class="p">),</span>
                <span class="s2">&quot;unicode int&quot;</span> <span class="p">:</span> <span class="nb">str</span><span class="p">(</span><span class="n">uniInt</span><span class="p">),</span>
            <span class="p">}</span>
            <span class="n">unicodeDictItems</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">D</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">unicodes</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">unicodeDictItems</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.importFontInfo"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.importFontInfo">[docs]</a>    <span class="k">def</span> <span class="nf">importFontInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">jsonPath</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Import font info data to from json file to internal dictionary.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;importing font info from file…&#39;</span><span class="p">)</span>
        <span class="c1"># read font info from json</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">jsonPath</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">inputFile</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoData</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">inputFile</span><span class="p">)</span>
        <span class="c1"># load font info dict into UI</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loadFontInfoDict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontInfoData</span><span class="p">)</span>
        <span class="c1"># done</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;…done.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.exportFontInfo"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.exportFontInfo">[docs]</a>    <span class="k">def</span> <span class="nf">exportFontInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filePath</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Export font info data to from internal dictionary to json file.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;exporting font info to file…&#39;</span><span class="p">)</span>
        <span class="c1"># save font info to json</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outputFile</span><span class="p">:</span>
            <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontInfoData</span><span class="p">,</span> <span class="n">outputFile</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
        <span class="c1"># done</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;…done.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.importFontInfoFromFont"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.importFontInfoFromFont">[docs]</a>    <span class="k">def</span> <span class="nf">importFontInfoFromFont</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ufoPath</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Import font info data to from a UFO font file.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="c1"># import data from fontinfo.plist</span>
        <span class="n">infoPlistPath</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ufoPath</span><span class="p">,</span> <span class="s1">&#39;fontinfo.plist&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">infoPlistPath</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">fontInfo</span> <span class="o">=</span> <span class="n">plistlib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="c1"># ignore guidelines</span>
        <span class="k">if</span> <span class="s1">&#39;guidelines&#39;</span> <span class="ow">in</span> <span class="n">fontInfo</span><span class="p">:</span>
            <span class="k">del</span> <span class="n">fontInfo</span><span class="p">[</span><span class="s1">&#39;guidelines&#39;</span><span class="p">]</span>
        <span class="c1"># update UI</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fontInfoData</span> <span class="o">=</span> <span class="n">fontInfo</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loadFontInfoDict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fontInfoData</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.importGlyphSet"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.importGlyphSet">[docs]</a>    <span class="k">def</span> <span class="nf">importGlyphSet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filePath</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Import glyph set from encoding file.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;importing glyph order from file…&#39;</span><span class="p">)</span>
        <span class="c1"># read glyph order from file</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">inputFile</span><span class="p">:</span>
            <span class="n">glyphSetRaw</span> <span class="o">=</span> <span class="n">inputFile</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
        <span class="c1"># ignore lines starting with %</span>
        <span class="n">glyphOrder</span> <span class="o">=</span> <span class="p">[</span><span class="n">L</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">L</span> <span class="ow">in</span> <span class="n">glyphSetRaw</span> <span class="k">if</span> <span class="ow">not</span> <span class="n">L</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;%&#39;</span><span class="p">)]</span>
        <span class="c1"># update UI</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">glyphNames</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">glyphOrder</span><span class="p">))</span>
        <span class="c1"># done</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;…done.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.exportGlyphSet"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.exportGlyphSet">[docs]</a>    <span class="k">def</span> <span class="nf">exportGlyphSet</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filePath</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Export glyph set to encoding file.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;exporting glyph set to .enc file…&#39;</span><span class="p">)</span>
        <span class="c1"># save glyph set to file</span>
        <span class="n">glyphSetRaw</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">glyphNames</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">glyphSetRaw</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;glyph set is empty.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="n">glyphSet</span> <span class="o">=</span> <span class="n">glyphSetRaw</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">outputFile</span><span class="p">:</span>
            <span class="n">outputFile</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">glyphSet</span><span class="p">)</span>
        <span class="c1"># done</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;…done.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.importUnicodes"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.importUnicodes">[docs]</a>    <span class="k">def</span> <span class="nf">importUnicodes</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filePath</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Import glyph names and unicodes from text file.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;importing unicodes from file…&#39;</span><span class="p">)</span>
        <span class="c1"># read unicode from file</span>
        <span class="n">unicodesData</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filePath</span><span class="p">,</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;replace&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">inputFile</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">L</span> <span class="ow">in</span> <span class="n">inputFile</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">L</span><span class="o">.</span><span class="n">split</span><span class="p">())</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
                    <span class="k">continue</span>
                <span class="n">glyphName</span><span class="p">,</span> <span class="n">uni</span> <span class="o">=</span> <span class="n">L</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
                <span class="n">unicodesData</span><span class="p">[</span><span class="n">glyphName</span><span class="p">]</span> <span class="o">=</span> <span class="n">uni</span>
        <span class="c1"># store unicodes dict</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">unicodesData</span> <span class="o">=</span> <span class="n">unicodesData</span>
        <span class="c1"># update UI</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">loadUnicodesDict</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">unicodesData</span><span class="p">)</span>
        <span class="c1"># done</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;…done.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.preflightFontInfo"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.preflightFontInfo">[docs]</a>    <span class="k">def</span> <span class="nf">preflightFontInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Preflight selected font info data.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;font info data:&#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">selectedFontInfoDataAsDict</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedFontInfoDataAsDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;- </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="p">))</span>
        <span class="c1"># no font info selected</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;- [None]&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">()</span></div>

<div class="viewcode-block" id="BatchSetDialog.preflightGlyphSet"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.preflightGlyphSet">[docs]</a>    <span class="k">def</span> <span class="nf">preflightGlyphSet</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Preflight glyph set &amp; order.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">createMissingGlyphs</span>   <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">createMissingGlyphs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">deleteRemainingGlyphs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">deleteRemainingGlyphs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">createMissingGlyphs</span> <span class="ow">or</span> <span class="n">deleteRemainingGlyphs</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;glyph set &amp; order:&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">createMissingGlyphs</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;- create missing glyphs&#39;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">deleteRemainingGlyphs</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;- delete remaining glyphs&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span></div>

<div class="viewcode-block" id="BatchSetDialog.preflightUnicodes"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.preflightUnicodes">[docs]</a>    <span class="k">def</span> <span class="nf">preflightUnicodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Preflight unicodes.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="n">_clearUnicodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">clearUnicodes</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">_clearUnicodes</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;unicode options:&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;- clear unicodes&#39;</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;custom unicodes:&#39;</span><span class="p">)</span>
        <span class="n">selectedUnicodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedUnicodes</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">selectedUnicodes</span><span class="p">):</span>
            <span class="n">w</span> <span class="o">=</span> <span class="nb">max</span><span class="p">([</span><span class="nb">len</span><span class="p">(</span><span class="n">k</span><span class="p">)</span> <span class="k">for</span> <span class="n">k</span> <span class="ow">in</span> <span class="n">selectedUnicodes</span><span class="o">.</span><span class="n">keys</span><span class="p">()])</span>
            <span class="k">for</span> <span class="n">glyphName</span><span class="p">,</span> <span class="n">uniInt</span> <span class="ow">in</span> <span class="n">selectedUnicodes</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="n">uniInt</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">uniInt</span><span class="p">)</span>
                <span class="n">uniHex</span> <span class="o">=</span> <span class="n">unicodeIntToHex</span><span class="p">(</span><span class="n">uniInt</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;- </span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1"> (</span><span class="si">%s</span><span class="s1">)&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">glyphName</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="n">w</span><span class="o">+</span><span class="mi">1</span><span class="p">),</span> <span class="n">uniHex</span><span class="p">,</span> <span class="n">uniInt</span><span class="p">))</span>
        <span class="c1"># no unicode selected</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;- [None]&#39;</span><span class="p">)</span>
        <span class="nb">print</span><span class="p">()</span></div>

<div class="viewcode-block" id="BatchSetDialog.preflight"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.preflight">[docs]</a>    <span class="k">def</span> <span class="nf">preflight</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fontInfo</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">glyphOrder</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">unicodes</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Print information about the batch operation before actually executing it.</span>

<span class="sd">        &#39;&#39;&#39;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">preflightTargetFonts</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">fontInfo</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preflightFontInfo</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">glyphOrder</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preflightGlyphSet</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">unicodes</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">preflightUnicodes</span><span class="p">()</span></div>

<div class="viewcode-block" id="BatchSetDialog.batchSetFontInfo"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.batchSetFontInfo">[docs]</a>    <span class="k">def</span> <span class="nf">batchSetFontInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Batch set font info in all target fonts.</span>

<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># -----------------</span>
        <span class="c1"># assert conditions</span>
        <span class="c1"># -----------------</span>

        <span class="c1"># no target fonts selected</span>
        <span class="n">targetFonts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">targetFonts</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">targetFonts</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;no target fonts selected.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># no font info entries selected</span>
        <span class="n">fontInfoDict</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedFontInfoDataAsDict</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">fontInfoDict</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;no font info attributes selected.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># -------------------</span>
        <span class="c1"># batch set font info</span>
        <span class="c1"># -------------------</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;batch setting font info...</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">targetFontName</span><span class="p">,</span> <span class="n">targetFont</span> <span class="ow">in</span> <span class="n">targetFonts</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">setting font info in font &#39;</span><span class="si">%s</span><span class="s2">&#39;...&quot;</span> <span class="o">%</span> <span class="n">targetFontName</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">fontInfoDict</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="nb">setattr</span><span class="p">(</span><span class="n">targetFont</span><span class="o">.</span><span class="n">info</span><span class="p">,</span> <span class="n">attr</span><span class="p">,</span> <span class="n">value</span><span class="p">)</span>

            <span class="c1"># save fonts without UI</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">targetFont</span><span class="o">.</span><span class="n">hasInterface</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">saving </span><span class="si">%s</span><span class="s1">...&#39;</span> <span class="o">%</span> <span class="n">targetFontName</span><span class="p">)</span>
                <span class="n">targetFont</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                <span class="n">targetFont</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">targetFont</span><span class="o">.</span><span class="n">changed</span><span class="p">()</span>

            <span class="c1"># done with font</span>
            <span class="nb">print</span><span class="p">()</span>

        <span class="c1"># done</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;...done.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.batchSetGlyphOrder"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.batchSetGlyphOrder">[docs]</a>    <span class="k">def</span> <span class="nf">batchSetGlyphOrder</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Batch set glyph order in all target fonts.</span>

<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># -----------------</span>
        <span class="c1"># assert conditions</span>
        <span class="c1"># -----------------</span>

        <span class="c1"># no target fonts selected</span>
        <span class="n">targetFonts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">targetFonts</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">targetFonts</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;no target fonts selected.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># ---------------------</span>
        <span class="c1"># batch set glyph order</span>
        <span class="c1"># ---------------------</span>

        <span class="c1"># get options</span>
        <span class="n">createMissingGlyphs</span>   <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">createMissingGlyphs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
        <span class="n">deleteRemainingGlyphs</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">deleteRemainingGlyphs</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;batch setting glyph order...</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">targetFontName</span><span class="p">,</span> <span class="n">targetFont</span> <span class="ow">in</span> <span class="n">targetFonts</span><span class="p">:</span>
            <span class="n">glyphOrderSrc</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">glyphSetSelector</span><span class="o">.</span><span class="n">glyphNames</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>
            <span class="n">glyphOrder</span> <span class="o">=</span> <span class="n">glyphOrderSrc</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">setting glyph order in font &#39;</span><span class="si">%s</span><span class="s2">&#39;...&quot;</span> <span class="o">%</span> <span class="n">targetFontName</span><span class="p">)</span>

            <span class="c1"># create missing glyphs</span>
            <span class="k">if</span> <span class="n">createMissingGlyphs</span><span class="p">:</span>
                <span class="n">missingGlyphs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">glyphOrder</span><span class="p">)</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">targetFont</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">creating missing glyphs...&quot;</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">glyphName</span> <span class="ow">in</span> <span class="n">missingGlyphs</span><span class="p">:</span>
                    <span class="n">targetFont</span><span class="o">.</span><span class="n">newGlyph</span><span class="p">(</span><span class="n">glyphName</span><span class="p">)</span>

            <span class="c1"># delete remaining glyphs</span>
            <span class="k">if</span> <span class="n">deleteRemainingGlyphs</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">deleting remaining glyphs...&quot;</span><span class="p">)</span>
                <span class="n">remainingGlyphs</span> <span class="o">=</span> <span class="nb">set</span><span class="p">(</span><span class="n">targetFont</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="o">.</span><span class="n">difference</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">glyphOrder</span><span class="p">))</span>
                <span class="k">for</span> <span class="n">glyphName</span> <span class="ow">in</span> <span class="n">remainingGlyphs</span><span class="p">:</span>
                    <span class="n">targetFont</span><span class="o">.</span><span class="n">removeGlyph</span><span class="p">(</span><span class="n">glyphName</span><span class="p">)</span>

            <span class="c1"># set glyph order</span>
            <span class="n">targetFont</span><span class="o">.</span><span class="n">glyphOrder</span> <span class="o">=</span> <span class="n">glyphOrder</span>

            <span class="c1"># save fonts without UI</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">targetFont</span><span class="o">.</span><span class="n">hasInterface</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">saving </span><span class="si">%s</span><span class="s1">...&#39;</span> <span class="o">%</span> <span class="n">targetFontName</span><span class="p">)</span>
                <span class="n">targetFont</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                <span class="n">targetFont</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">targetFont</span><span class="o">.</span><span class="n">changed</span><span class="p">()</span>

            <span class="c1"># done with font</span>
            <span class="nb">print</span><span class="p">()</span>

        <span class="c1"># done</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;...done.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div>

<div class="viewcode-block" id="BatchSetDialog.batchSetUnicodes"><a class="viewcode-back" href="../../../../dialogs/batch/set.html#hTools3.dialogs.batch.set.BatchSetDialog.batchSetUnicodes">[docs]</a>    <span class="k">def</span> <span class="nf">batchSetUnicodes</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&#39;&#39;&#39;</span>
<span class="sd">        Batch set unicodes in all target fonts.</span>

<span class="sd">        &#39;&#39;&#39;</span>

        <span class="c1"># -----------------</span>
        <span class="c1"># assert conditions</span>
        <span class="c1"># -----------------</span>

        <span class="c1"># no target fonts selected</span>
        <span class="n">targetFonts</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">targetFonts</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">len</span><span class="p">(</span><span class="n">targetFonts</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;no target fonts selected.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="c1"># ------------------</span>
        <span class="c1"># batch set unicodes</span>
        <span class="c1"># ------------------</span>

        <span class="c1"># get options</span>
        <span class="n">selectedUnicodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">selectedUnicodes</span>
        <span class="n">_clearUnicodes</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">unicodesSelector</span><span class="o">.</span><span class="n">clearUnicodes</span><span class="o">.</span><span class="n">get</span><span class="p">()</span>

        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;batch setting unicodes...</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">targetFontName</span><span class="p">,</span> <span class="n">targetFont</span> <span class="ow">in</span> <span class="n">targetFonts</span><span class="p">:</span>

            <span class="c1"># clear unicodes</span>
            <span class="k">if</span> <span class="n">_clearUnicodes</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">removing all unicodes in font &#39;</span><span class="si">%s</span><span class="s2">&#39;...&quot;</span> <span class="o">%</span> <span class="n">targetFontName</span><span class="p">)</span>
                <span class="n">clearUnicodes</span><span class="p">(</span><span class="n">targetFont</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">()</span>

            <span class="c1"># set unicodes</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\t</span><span class="s2">setting unicodes in font &#39;</span><span class="si">%s</span><span class="s2">&#39;...</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="n">targetFontName</span><span class="p">)</span>
            <span class="k">for</span> <span class="n">glyphName</span> <span class="ow">in</span> <span class="n">targetFont</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">g</span> <span class="o">=</span> <span class="n">targetFont</span><span class="p">[</span><span class="n">glyphName</span><span class="p">]</span>
                <span class="n">autoUnicode</span><span class="p">(</span><span class="n">g</span><span class="p">,</span> <span class="n">customUnicodes</span><span class="o">=</span><span class="n">selectedUnicodes</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>

            <span class="c1"># save fonts without UI</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">targetFont</span><span class="o">.</span><span class="n">hasInterface</span><span class="p">():</span>
                <span class="nb">print</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\t</span><span class="s1">saving </span><span class="si">%s</span><span class="s1">...&#39;</span> <span class="o">%</span> <span class="n">targetFontName</span><span class="p">)</span>
                <span class="n">targetFont</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
                <span class="n">targetFont</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">targetFont</span><span class="o">.</span><span class="n">changed</span><span class="p">()</span>

            <span class="c1"># done with font</span>
            <span class="nb">print</span><span class="p">()</span>

        <span class="c1"># done</span>
        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;...done.</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span></div></div>

<span class="c1"># -------</span>
<span class="c1"># testing</span>
<span class="c1"># -------</span>

<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>

    <span class="n">BatchSetDialog</span><span class="p">()</span>
</pre></div>

          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../../../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../../../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../../../index.html">hTools3</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../../../index.html" >Module code</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="../../dialogs.html" >hTools3.dialogs</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2018, Gustavo Ferreira.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.5.2.
    </div>
  </body>
</html>